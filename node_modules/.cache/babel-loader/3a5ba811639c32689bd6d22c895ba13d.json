{"ast":null,"code":"var _jsxFileName = \"/Users/eleonorakurilchik/Desktop/CrimeLab-master/src/components/Home.js\";\nimport React, { useState } from 'react';\nimport { POPULAR_BASE_URL, SEARCH_BASE_URL, POSTER_SIZE, BACKDROP_SIZE, IMAGE_BASE_URL } from '../config';\nimport ThumbImage from './elements/ThumbnailImage';\nimport SearchBar from './elements/SearchBar';\nimport Grid from './elements/Grid';\nimport MovieThumb from './elements/MovieThumb';\nimport LoadMoreBtn from './elements/LoadMoreBtn';\nimport Spinner from './elements/Spinner';\nimport NotFound from './elements/NotFound';\nimport { useHomeFetch } from './hooks/useHomeFetch';\nimport NoImage from './images/no_image.jpg';\n\nconst Home = () => {\n  const [{\n    state: {\n      time,\n      movies,\n      currentPage,\n      totalPages,\n      heroImage\n    },\n    loading,\n    error\n  }, fetchMovies] = useHomeFetch();\n  const [searchTerm, setSearchTerm] = useState('');\n\n  const searchMovies = search => {\n    const endpoint = search ? SEARCH_BASE_URL + search : POPULAR_BASE_URL;\n    setSearchTerm(search);\n    fetchMovies(endpoint);\n  };\n\n  const loadMoreMovies = () => {\n    const searchEndpoint = `${SEARCH_BASE_URL}${searchTerm}&page=${currentPage + 1}`;\n    const popularEndpoint = `${POPULAR_BASE_URL}&page=${currentPage + 1}`;\n    const endpoint = searchTerm ? searchEndpoint : popularEndpoint;\n    fetchMovies(endpoint);\n  };\n\n  if (error) return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }\n  }, \"Oops! Something went wrong\");\n  if (!movies[0]) return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(SearchBar, {\n    callback: searchMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(NotFound, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 17\n    }\n  }));\n  return /*#__PURE__*/React.createElement(React.Fragment, null, \" \", !searchTerm && /*#__PURE__*/React.createElement(ThumbImage, {\n    image: `${IMAGE_BASE_URL}${BACKDROP_SIZE}${heroImage.backdrop_path}`,\n    title: heroImage.original_title,\n    text: heroImage.overview,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(SearchBar, {\n    callback: searchMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    header: searchTerm ? 'Search Result' : 'Popular Crime Movies',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, movies.map(movie => /*#__PURE__*/React.createElement(MovieThumb, {\n    key: movie.id,\n    clickable: true,\n    image: movie.poster_path ? IMAGE_BASE_URL + POSTER_SIZE + movie.poster_path : NoImage,\n    movieId: movie.id,\n    movieName: movie.original_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 21\n    }\n  })), \" \"), loading && /*#__PURE__*/React.createElement(Spinner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 24\n    }\n  }), currentPage < totalPages && !loading && /*#__PURE__*/React.createElement(LoadMoreBtn, {\n    text: \"Load more\",\n    callback: loadMoreMovies,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 17\n    }\n  }), \" \");\n};\n\nexport default Home;","map":{"version":3,"sources":["/Users/eleonorakurilchik/Desktop/CrimeLab-master/src/components/Home.js"],"names":["React","useState","POPULAR_BASE_URL","SEARCH_BASE_URL","POSTER_SIZE","BACKDROP_SIZE","IMAGE_BASE_URL","ThumbImage","SearchBar","Grid","MovieThumb","LoadMoreBtn","Spinner","NotFound","useHomeFetch","NoImage","Home","state","time","movies","currentPage","totalPages","heroImage","loading","error","fetchMovies","searchTerm","setSearchTerm","searchMovies","search","endpoint","loadMoreMovies","searchEndpoint","popularEndpoint","backdrop_path","original_title","overview","map","movie","id","poster_path"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B;AACA,SACIC,gBADJ,EAEIC,eAFJ,EAGIC,WAHJ,EAIIC,aAJJ,EAKIC,cALJ,QAMO,WANP;AAOA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;AACA,OAAOC,IAAP,MAAiB,iBAAjB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,SAAQC,YAAR,QAA2B,sBAA3B;AACA,OAAOC,OAAP,MAAoB,uBAApB;;AAEA,MAAMC,IAAI,GAAG,MAAM;AACf,QAAM,CACF;AACIC,IAAAA,KAAK,EAAE;AACHC,MAAAA,IADG;AAEHC,MAAAA,MAFG;AAGHC,MAAAA,WAHG;AAIHC,MAAAA,UAJG;AAKHC,MAAAA;AALG,KADX;AAQIC,IAAAA,OARJ;AASIC,IAAAA;AATJ,GADE,EAWCC,WAXD,IAYFX,YAAY,EAZhB;AAaA,QAAM,CAACY,UAAD,EAAaC,aAAb,IAA8B1B,QAAQ,CAAC,EAAD,CAA5C;;AAEA,QAAM2B,YAAY,GAAGC,MAAM,IAAI;AAC3B,UAAMC,QAAQ,GAAGD,MAAM,GAAG1B,eAAe,GAAG0B,MAArB,GAA8B3B,gBAArD;AAEAyB,IAAAA,aAAa,CAACE,MAAD,CAAb;AACAJ,IAAAA,WAAW,CAACK,QAAD,CAAX;AAEH,GAND;;AAQA,QAAMC,cAAc,GAAG,MAAM;AACzB,UAAMC,cAAc,GAAI,GAAE7B,eAAgB,GAAEuB,UAAW,SACnDN,WAAW,GAAG,CACjB,EAFD;AAGA,UAAMa,eAAe,GAAI,GAAE/B,gBAAiB,SACxCkB,WAAW,GAAG,CACjB,EAFD;AAIA,UAAMU,QAAQ,GAAGJ,UAAU,GAAGM,cAAH,GAAoBC,eAA/C;AAEAR,IAAAA,WAAW,CAACK,QAAD,CAAX;AAEH,GAZD;;AAcA,MAAIN,KAAJ,EACI,oBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kCAAP;AAEJ,MAAI,CAACL,MAAM,CAAC,CAAD,CAAX,EACI,oBACI,uDACI,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAES,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,CADJ;AAQJ,sBACI,+CACI,CAACF,UAAD,iBACI,oBAAC,UAAD;AAAY,IAAA,KAAK,EACR,GAAEpB,cAAe,GAAED,aAAc,GAC9BiB,SAAS,CAACY,aACb,EAHT;AAKI,IAAA,KAAK,EACDZ,SAAS,CAACa,cANlB;AAQI,IAAA,IAAI,EACAb,SAAS,CAACc,QATlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFR,eAeI,oBAAC,SAAD;AAAW,IAAA,QAAQ,EAAER,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAfJ,eAgBI,oBAAC,IAAD;AAAM,IAAA,MAAM,EACRF,UAAU,GAAG,eAAH,GAAqB,sBADnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIIP,MAAM,CAACkB,GAAP,CAAWC,KAAK,iBACZ,oBAAC,UAAD;AAAY,IAAA,GAAG,EACPA,KAAK,CAACC,EADd;AAGI,IAAA,SAAS,MAHb;AAII,IAAA,KAAK,EACDD,KAAK,CAACE,WAAN,GAAoBlC,cAAc,GAAGF,WAAjB,GAA+BkC,KAAK,CAACE,WAAzD,GAAuEzB,OAL/E;AAOI,IAAA,OAAO,EACHuB,KAAK,CAACC,EARd;AAUI,IAAA,SAAS,EACLD,KAAK,CAACH,cAXd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CAJJ,MAhBJ,EAqCIZ,OAAO,iBAAI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IArCf,EAwCIH,WAAW,GAAGC,UAAd,IAA4B,CAACE,OAA7B,iBACI,oBAAC,WAAD;AAAa,IAAA,IAAI,EAAC,WAAlB;AACI,IAAA,QAAQ,EAAEQ,cADd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzCR,MADJ;AA+CH,CAjGD;;AAmGA,eAAef,IAAf","sourcesContent":["import React, {useState} from 'react';\nimport {\n    POPULAR_BASE_URL,\n    SEARCH_BASE_URL,\n    POSTER_SIZE,\n    BACKDROP_SIZE,\n    IMAGE_BASE_URL\n} from '../config';\nimport ThumbImage from './elements/ThumbnailImage';\nimport SearchBar from './elements/SearchBar';\nimport Grid from './elements/Grid';\nimport MovieThumb from './elements/MovieThumb';\nimport LoadMoreBtn from './elements/LoadMoreBtn';\nimport Spinner from './elements/Spinner';\nimport NotFound from './elements/NotFound';\nimport {useHomeFetch} from './hooks/useHomeFetch';\nimport NoImage from './images/no_image.jpg';\n\nconst Home = () => {\n    const [\n        {\n            state: {\n                time,\n                movies,\n                currentPage,\n                totalPages,\n                heroImage\n            },\n            loading,\n            error\n        }, fetchMovies,\n    ] = useHomeFetch();\n    const [searchTerm, setSearchTerm] = useState('');\n\n    const searchMovies = search => {\n        const endpoint = search ? SEARCH_BASE_URL + search : POPULAR_BASE_URL;\n\n        setSearchTerm(search);\n        fetchMovies(endpoint);\n\n    }\n\n    const loadMoreMovies = () => {\n        const searchEndpoint = `${SEARCH_BASE_URL}${searchTerm}&page=${\n            currentPage + 1\n        }`;\n        const popularEndpoint = `${POPULAR_BASE_URL}&page=${\n            currentPage + 1\n        }`;\n\n        const endpoint = searchTerm ? searchEndpoint : popularEndpoint;\n\n        fetchMovies(endpoint);\n\n    }\n\n    if (error) \n        return <div>Oops! Something went wrong</div>;\n    \n    if (!movies[0]) \n        return (\n            <>\n                <SearchBar callback={searchMovies}/>\n                <NotFound/>\n            </>\n        );\n    \n\n    return (\n        <> {\n            !searchTerm && (\n                <ThumbImage image={\n                        `${IMAGE_BASE_URL}${BACKDROP_SIZE}${\n                            heroImage.backdrop_path\n                        }`\n                    }\n                    title={\n                        heroImage.original_title\n                    }\n                    text={\n                        heroImage.overview\n                    }/>\n            )\n        }\n            <SearchBar callback={searchMovies}/>\n            <Grid header={\n                searchTerm ? 'Search Result' : 'Popular Crime Movies'\n            }>\n                {\n                movies.map(movie => (\n                    <MovieThumb key={\n                            movie.id\n                        }\n                        clickable\n                        image={\n                            movie.poster_path ? IMAGE_BASE_URL + POSTER_SIZE + movie.poster_path : NoImage\n                        }\n                        movieId={\n                            movie.id\n                        }\n                        movieName={\n                            movie.original_title\n                        }/>\n                ))\n            } </Grid>\n            {\n            loading && <Spinner/>\n        }\n            {\n            currentPage < totalPages && !loading && (\n                <LoadMoreBtn text=\"Load more\"\n                    callback={loadMoreMovies}/>\n            )\n        } </>\n    );\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}